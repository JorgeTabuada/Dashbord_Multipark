<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferramentas Multipark</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos do teu style_principal.css foram incorporados aqui para garantir que são aplicados */
        body { font-family: 'Inter', sans-serif; background-color: #f0f2f5; color: #374151; margin: 0; line-height: 1.6; }
        .hidden { display: none !important; }
        .app-container { min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 1rem; box-sizing: border-box; }
        .main-content-container { background-color: #f0f2f5; padding: 1rem; border-radius: 0.5rem; width: 100%; max-width: 1200px; display: flex; flex-direction: column; align-items: center; margin-top: 2rem; margin-bottom: 2rem; }
        .login-box { background-color: #fff; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        .app-logo-styled { font-size: 1.85rem; font-weight: 700; color: #0A2B5C; margin-bottom: 2rem; text-align: center; display: flex; align-items: center; justify-content: center; letter-spacing: 0.5px; }
        .app-logo-styled .logo-p-icon { background-color: #0A2B5C; color: #fff; padding: 4px 10px; margin-right: 6px; border-radius: 4px; font-family: 'Arial Black', Gadget, sans-serif; font-size: 1.9rem; line-height: 1; }
        .welcome-message { font-size: 1.25rem; font-weight: 600; color: #333; margin-bottom: 1rem; text-align: center; }
        .park-selector-container { margin-bottom: 1.5rem; width: 100%; max-width: 320px; }
        #parkSelectorPrincipal { width: 100%; padding: 0.65rem 1rem; border: 1px solid #ccc; border-radius: 0.375rem; background-color: #fff; font-size: 0.95rem; text-align: center; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23333'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1.25em 1.25em; padding-right: 2.5rem; }
        #dashboardGridPrincipal { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 1rem; padding: 1rem; max-width: 1400px; margin-left: auto; margin-right: auto; width:100%; }
        .subapp-button-principal { background-color: #FFFFFF; color: #0A2B5C; border: 1px solid #E5E7EB; border-radius: 0.5rem; padding: 1.25rem 0.75rem; text-align: center; font-weight: 500; font-size: 0.875rem; cursor: pointer; transition: all 0.2s ease-in-out; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03); word-break: break-word; line-height: 1.3; }
        .subapp-button-principal:hover { background-color: #0A2B5C; color: #FFFFFF; transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); }
        .subapp-button-principal span:first-child { font-size: 1.75rem; margin-bottom: 0.5rem; } /* Para o ícone */
        .subapp-button-principal span:last-child { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; } /* Para o nome */
        #loginFormPrincipal label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #4B5563; }
        #loginFormPrincipal input[type="email"], #loginFormPrincipal input[type="password"] { width: 100%; padding: 0.75rem 1rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; font-size: 1rem; margin-bottom: 1rem; }
        #loginButtonPrincipal { width: 100%; background-color: #2563EB; color: white; font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.375rem; }
        #logoutButtonPrincipal { background-color: #EF4444; color: white; font-weight: 500; padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; cursor: pointer; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1050; }
        .modal-content { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 5px 15px rgba(0,0,0,0.3); width: 100%; max-width: 400px; text-align: center; }
    </style>
</head>
<body>

    <div id="loginPagePrincipal" class="app-container flex justify-center items-center"> <div class="login-box">
            <div class="app-logo-styled">
                <span class="logo-p-icon">P</span><span class="logo-text-multipark">MULTIPARK</span>
            </div>
            <form id="loginFormPrincipal"> <div class="mb-4">
                    <label for="emailPrincipal" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="emailPrincipal" name="email" required class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="o.seu@email.com">
                </div>
                <div class="mb-6">
                    <label for="passwordPrincipal" class="block text-sm font-medium text-gray-700 mb-1">Palavra-passe</label>
                    <input type="password" id="passwordPrincipal" name="password" required class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="********">
                </div>
                <button type="submit" id="loginButtonPrincipal" class="w-full">Entrar</button> </form>
            <p id="loginErrorMessagePrincipal" class="text-red-500 text-sm mt-3 text-center hidden"></p> </div>
    </div>

    <div id="dashboardPagePrincipal" class="app-container hidden"> <div class="main-content-container">
            <div class="app-logo-styled">
                <span class="logo-p-icon">P</span><span class="logo-text-multipark">MULTIPARK</span>
            </div>
            <div class="welcome-message">
                BEM-VINDO DE VOLTA, <span id="userNamePrincipal">Utilizador</span>! </div>
            <div class="park-selector-container">
                <label for="parkSelectorPrincipal" class="sr-only">Selecionar Parque</label>
                <select id="parkSelectorPrincipal" name="parkSelectorPrincipal" class="block w-full p-3 border border-gray-300 rounded-md"> </select>
            </div>
            <main id="dashboardGridPrincipal" class="dashboard-grid-principal w-full"> </main>
            <div class="logout-button-container mt-8">
                <button id="logoutButtonPrincipal" class="w-full">Sair</button> </div>
        </div>
    </div>
    
    <div id="messageModal" class="modal hidden"> <div class="modal-content">
            <h2 id="modalTitle" class="text-xl font-semibold mb-4">Mensagem</h2>
            <p id="modalMessageText" class="mb-6"></p>
            <button id="modalCloseButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Fechar</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/auth_global.js"></script>
    <script src="js/app_principal.js"></script> 
</body>
</html>
